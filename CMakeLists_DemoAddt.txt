
# Demo: Integrated Animation (Visual)
add_executable(IntegratedAnimationDemo
    src_refactored/Demos/IntegratedAnimationDemo.cpp
    src_refactored/Core/Coordinator.cpp
    src_refactored/Core/EntityManager.cpp
    src_refactored/Core/ComponentManager.cpp
    src_refactored/Core/SystemManager.cpp
    src_refactored/Core/Logger.cpp
    src_refactored/Rendering/DX12RenderPipeline.cpp
    src_refactored/Rendering/D3D12Mesh.cpp
    src_refactored/Rendering/D3D12Backend.cpp
    src_refactored/Rendering/Camera.cpp
    src_refactored/Animation/AnimationSystem.cpp
    src_refactored/Animation/AnimationResources.cpp
    src_refactored/Animation/AnimationStateMachine.cpp
    src_refactored/Animation/BlendTree.cpp
    src_refactored/Animation/IKSolver.cpp
    src_refactored/Physics/PhysXPhysicsSystem.cpp
    src_refactored/Gameplay/CharacterControllerSystem.cpp
    src_refactored/Gameplay/AnimationControllerSystem.cpp
    src_refactored/Gameplay/CharacterFactory.cpp
    src_refactored/Gameplay/CombatSystem.cpp
    src_refactored/VFX/ParticleSystem.cpp
)

target_include_directories(IntegratedAnimationDemo PRIVATE
    ${CMAKE_SOURCE_DIR}/include_refactored
    ${CMAKE_SOURCE_DIR}/include
    ${ASSIMP_INCLUDE_DIRS}
    ${GLM_INCLUDE_DIRS}
    ${GLFW_INCLUDE_DIR}
    ${PHYSX_INCLUDE_DIRS}
)

target_link_libraries(IntegratedAnimationDemo PRIVATE
    d3d12
    dxgi
    d3dcompiler
    ${Assimp_LIBRARIES}
    ${GLFW_LIBRARIES}
    ${PHYSX_LIBRARIES}
)

# Copy Assets/DLLs
if(MSVC)
    add_custom_command(TARGET IntegratedAnimationDemo POST_BUILD
        COMMAND ${CMAKE_COMMAND} -E copy_if_different
        "${CMAKE_SOURCE_DIR}/assets/Testwuson.X" # If exists
        $<TARGET_FILE_DIR:IntegratedAnimationDemo>
    )
endif()
